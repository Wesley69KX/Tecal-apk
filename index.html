<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel de Status das Torres</title>

  <!-- Manifest PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1677ff">

  <!-- Registrar Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/service-worker.js");
    }
  </script>

  <link rel="stylesheet" href="/style.css">
</head>

<body onload="checkLogin()">

<div class="container">
  <div class="header">
    <div class="header-title">
      <img src="https://ssl.gstatic.com/docs/doc_assets/images/drive_48.png" width="45">
      <h1>ğŸ›°ï¸ Painel de Torres â€“ Dashboard</h1>
    </div>

    <div class="controls">
      <label>Status:
        <select id="filterStatus">
          <option value="all">Todos</option>
          <option value="Operando">Operando</option>
          <option value="Falha">Falha</option>
          <option value="Offline">Offline</option>
        </select>
      </label>

      <label>Auto-refresh (s):
        <input id="refreshInterval" type="number" min="5" value="20" style="width:70px">
      </label>

      <button class="btn" id="btnRefresh">ğŸ” Atualizar</button>
      <button class="btn" id="btnExport">ğŸ“¤ PDF</button>
    </div>
  </div>

  <div id="towers-panel"></div>
</div>

<!-- Modal de ediÃ§Ã£o -->
<div class="modal" id="editModal">
  <div class="modal-card">
    <h3>Editar Torre: <span id="editName"></span></h3>

    <label>Torre</label>
    <input id="editTorre" disabled>

    <label>LocalizaÃ§Ã£o</label>
    <input id="editLocalizacao">

    <label>Status Operacional</label>
    <select id="editStatus">
      <option>Operando</option>
      <option>Falha</option>
      <option>Offline</option>
    </select>

    <label>Falha Detectada</label>
    <input id="editFalha">

    <label>HistÃ³rico de Falha</label>
    <textarea id="editHistorico"></textarea>

    <label>AÃ§Ã£o Requerida</label>
    <input id="editAcao">

    <label>TÃ©cnico ResponsÃ¡vel</label>
    <input id="editTecnico">

    <label>Data da Ãšltima ManutenÃ§Ã£o</label>
    <input type="date" id="editDataManutencao">

    <label>Custo (R$)</label>
    <input type="number" step="0.01" id="editCusto">

    <label>PeÃ§as Utilizadas</label>
    <input id="editPecas">

    <label>PrÃ³xima ManutenÃ§Ã£o</label>
    <input type="date" id="editProxManutencao">

    <label>PendÃªncia de ServiÃ§o</label>
    <textarea id="editPendServico"></textarea>

    <label>PendÃªncia de Material</label>
    <textarea id="editPendMaterial"></textarea>

    <label>ObservaÃ§Ãµes</label>
    <textarea id="editObs"></textarea>

    <div class="modal-actions">
      <button class="btn" id="saveEdit">Salvar</button>
      <button class="btn-danger" id="cancelEdit">Cancelar</button>
    </div>
  </div>
</div>

<!-- Tela de login -->
<div class="modal" id="loginModal">
  <div class="modal-card">
    <h3>ğŸ”’ Login</h3>
    <p>Informe a senha para acessar o painel.</p>
    <input type="password" id="loginPass" placeholder="Senha">
    <div class="modal-actions">
      <button class="btn" id="btnLogin">Entrar</button>
    </div>
  </div>
</div>

<!-- Scripts principais -->
<script src="/offline.js"></script>
<script src="/script.js"></script>

</body>
</html>
