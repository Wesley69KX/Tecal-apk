<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Painel de Torres â€” PWA</title>

  <!-- PWA / iOS -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1677ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="/icon-192.png">

  <link rel="stylesheet" href="/style.css">

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js').catch(()=>console.warn('SW registration failed'));
    }
  </script>
</head>
<body>

<header class="topbar">
  <div class="topbar-left">
    <img src="/icon-192.png" alt="" width="36">
    <h1>Painel de Torres</h1>
  </div>
  <div class="topbar-right">
    <button id="btnSync" class="btn small">ğŸ”„</button>
  </div>
</header>

<main class="main">
  <section class="controls">
    <select id="filterStatus" aria-label="Filtrar status">
      <option value="all">Todos</option>
      <option value="Operando">Operando</option>
      <option value="Falha">Falha</option>
      <option value="Offline">Offline</option>
    </select>

    <div class="search-row">
      <input id="searchInput" placeholder="Procurar torre..." />
      <button id="btnRefresh" class="btn">Atualizar</button>
    </div>
  </section>

  <section id="towers-panel" class="list"></section>

  <button id="addBtn" class="fab">ï¼‹</button>
</main>

<!-- Edit Modal -->
<div id="editModal" class="modal" aria-hidden="true">
  <div class="modal-card">
    <h2 id="editTitle">Editar Torre</h2>

    <label>Torre</label>
    <input id="editTorre" disabled>

    <label>LocalizaÃ§Ã£o</label>
    <input id="editLocalizacao">

    <label>Status</label>
    <select id="editStatus">
      <option>Operando</option>
      <option>Falha</option>
      <option>Offline</option>
    </select>

    <label>Falha Detectada</label>
    <input id="editFalha">

    <label>AÃ§Ã£o Requerida</label>
    <input id="editAcao">

    <label>TÃ©cnico ResponsÃ¡vel</label>
    <input id="editTecnico">

    <label>Data Ãšlt. ManutenÃ§Ã£o</label>
    <input id="editDataManutencao" type="date">

    <label>Custo (R$)</label>
    <input id="editCusto" type="number" step="0.01">

    <label>PeÃ§as Utilizadas</label>
    <input id="editPecas">

    <label>PrÃ³xima ManutenÃ§Ã£o</label>
    <input id="editProxManutencao" type="date">

    <label>PendÃªncia de ServiÃ§o</label>
    <textarea id="editPendServico"></textarea>

    <label>PendÃªncia de Material</label>
    <textarea id="editPendMaterial"></textarea>

    <label>ObservaÃ§Ãµes</label>
    <textarea id="editObs"></textarea>

    <div class="modal-actions">
      <button id="saveEdit" class="btn">Salvar</button>
      <button id="cancelEdit" class="btn danger">Cancelar</button>
      <button id="reportBtn" class="btn">ğŸ“„ RelatÃ³rio</button>
    </div>
  </div>
</div>

<!-- Offline fallback page link (cached) -->
<div id="offlineBanner" class="offline-banner hidden">VocÃª estÃ¡ offline â€” usando dados locais.</div>

<script src="/idb.js"></script>
<script src="/app.js"></script>
</body>
</html>
